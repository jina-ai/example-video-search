jtype: Flow
version: '1'
executors:
  - name: frame_extractor
    uses:
      jtype: FrameExtractor
    uses_metas:
      workspace: $JINA_WORKSPACE
    py_module:
      - executors.py
  - name: image_encoder
    uses: jinahub://CLIPImageEncoder/v0.1
    uses_with:
      traversal_paths: ['c',]
    uses_requests:  # override the @requests
      /index: 'encode'
#    force: True
  - name: text_encoder
    uses: jinahub://CLIPTextEncoder/v0.1
    uses_with:
      traversal_paths: ['r',]
    uses_requests:  # override the @requests
      /search: 'encode'
  - name: indexer
    uses: jinahub://SimpleTraversalIndexer/v0.1
    uses_with:
      traversal_paths: ['c',]
    uses_metas:
      workspace: $JINA_WORKSPACE
#    force: True
  - name: ranker
    uses: SimpleRanker
    py_module:
      - executors.py

